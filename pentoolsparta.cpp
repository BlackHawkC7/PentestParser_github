#include "pentoolsparta.h"

PenToolSparta::PenToolSparta()
{

}

PenToolSparta::PenToolSparta(QString filePath)
{
    /*
    QFile f(filePath);
    if(!f.open(QIODevice::ReadOnly)) {
        qDebug() << "error loading file";
    }
    //this->dbFile.setContent(&f);
    f.close();
    */

    db = QSqlDatabase::addDatabase("QSQLITE");
    db.setDatabaseName(filePath);

    if(!db.open()) {
        qInfo() << "error connecting with database";
    }
}

void PenToolSparta::parse()
{
    QSqlQuery query;

    QStringList tablesList = db.tables();
    QStringList tablesContentList;

    for(int i=0; i<tablesList.size(); i++) {
        QString actualTable = tablesList.at(i);

        query.exec("SELECT COUNT(*) FROM " + actualTable);
        query.first();
        int numberOfRows = query.value(0).toInt();
        if(numberOfRows > 0) tablesContentList.append(actualTable);
    }

    qDebug() << "count: " << tablesContentList.size();

    //TODO




    db.close();
}
